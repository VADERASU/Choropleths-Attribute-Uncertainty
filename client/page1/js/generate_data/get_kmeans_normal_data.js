var {LineC} = require("../LineChart.js");
var ClusterAl = require("../ClusterAl.js");
var state = require("../state.js");
let MI = require("../MoranI/MoranI.js");

//[119.47587156714124, 112.69140405526596, 102.07462541496574, 86.19674762161571, 99.65299776927569, 89.31206402338924, 104.13613878039841, 103.31363662697134, 106.00398735384258, 105.54780121181341, 101.59642589355933, 100.51778983109982, 118.64933573331288, 100.99220451963521, 92.05630897076178, 104.88229231806314, 94.96201570527069, 94.65486218882324, 93.98009800656253, 95.42166984635463, 98.68809445945095, 92.6311523998857, 82.52137671945577, 83.92090482270311, 86.22973031312547, 96.90127375420667, 97.00612070517911, 112.00779884840937, 85.47935771093542, 96.52653887009946, 109.9988806301336, 95.76652987111041, 105.26385158581304, 82.50139799788496, 108.37815193513595, 101.7857897991631, 114.66659769044338, 103.19316320294391, 106.77692485433994, 98.57397998866763, 107.30468102411642, 111.79020702313152, 94.03596075307748, 105.7112300057738, 99.24587032874486, 102.86412714368402, 92.15187112869744, 103.17733084539856, 100.94446704840352, 111.04326659527062, 109.73962759199503, 93.35999945269629, 101.55879932997104, 106.35272590535212, 91.55301095928547, 87.75930137804201, 106.98733545633034, 101.15804561253674, 95.60279876324276, 90.22170802274948, 97.25477459504904, 95.51469475196282, 91.47806585801627, 111.73964559586268, 118.73136416134618, 94.01108170624143, 77.6204214865659, 92.12228587474809, 97.77162941228002, 98.52029247666195, 98.92401142349955, 99.16596682268644, 85.48531957687169, 102.11845520909043, 110.28957719999492, 101.23012415420098]
const generate_data={
	init:function(){
		
		//generate data
		// let data1 = getdata(76)
		// let data2 = getdata2(76)
		//normal
		let data0 = [112.57660482113043, 95.22586735700473, 86.8791864217472, 96.55430485668671, 87.80516381703943, 102.98422077884891, 95.99530410446081, 94.5341167623725, 86.8206473468365, 106.66449012346936, 121.73251142023675, 115.30809122319012, 93.00161358333315, 89.43297432183184, 92.12297460221394, 96.04611038613989, 104.31019166801822, 96.9793951090245, 100.05833387819064, 106.40479155187673, 90.82358898638988, 93.91150237597674, 96.55896091648604, 98.78423909310494, 119.33917289393719, 101.9913374693868, 77.93587013593657, 99.33755007345586, 94.78798480910363, 87.50504774993982, 111.70048391833711, 104.71350275361543, 85.1197573757313, 82.76269523393796, 115.69143128262164, 105.70754116549396, 98.62565452220039, 104.06084579948165, 85.1909007000794, 83.64503736175439, 107.15258766059594, 97.27732406669115, 84.35699818334595, 103.50946018428306, 84.87789771435301, 90.77399786922554, 94.07604266691082, 110.2256154812153, 92.47328323566533, 106.27206781153829, 69.31343084830601, 101.51970598959326, 101.71472824856339, 105.36710266593373, 100.95182263504037, 90.38142518520891, 100.43277264494824, 101.12607814950931, 100.7698525090821, 92.39227399868471, 101.6079011024148, 105.08774902412272, 104.79255557652236, 93.8174537051798, 99.41055805516764, 89.60562710944644, 94.44908301162599, 91.06276763566298, 97.40547833781604, 98.72353890434022, 94.58103293069632, 107.840221711016, 97.66610256479132, 95.43339090717433, 82.78377746004371, 93.32814066747768]
		let data1 = [100.47587156714124, 112.69140405526596, 102.07462541496574, 86.19674762161571, 99.65299776927569, 89.31206402338924, 104.13613878039841, 103.31363662697134, 106.00398735384258, 105.54780121181341, 101.59642589355933, 100.51778983109982, 118.64933573331288, 100.99220451963521, 92.05630897076178, 104.88229231806314, 94.96201570527069, 94.65486218882324, 93.98009800656253, 98.42166984635463, 98.68809445945095, 92.6311523998857, 82.52137671945577, 83.92090482270311, 86.22973031312547, 96.90127375420667, 97.00612070517911, 112.00779884840937, 85.47935771093542, 96.52653887009946, 109.9988806301336, 100.76652987111041, 105.26385158581304, 82.50139799788496, 108.37815193513595, 101.7857897991631, 114.66659769044338, 103.19316320294391, 106.77692485433994, 98.57397998866763, 107.30468102411642, 111.79020702313152, 94.03596075307748, 105.7112300057738, 99.24587032874486, 102.86412714368402, 92.15187112869744, 103.17733084539856, 100.94446704840352, 111.04326659527062, 109.73962759199503, 93.35999945269629, 101.55879932997104, 106.35272590535212, 91.55301095928547, 87.75930137804201, 106.98733545633034, 101.15804561253674, 95.60279876324276, 90.22170802274948, 97.25477459504904, 95.51469475196282, 91.47806585801627, 111.73964559586268, 118.73136416134618, 94.01108170624143, 77.6204214865659, 92.12228587474809, 97.77162941228002, 98.52029247666195, 98.92401142349955, 99.16596682268644, 85.48531957687169, 102.11845520909043, 110.28957719999492, 101.23012415420098]
		//long tail
		let data2 = [9.548918589197358, 10.226903039281728, 8.803258489686575, 0.06822305986167661, 21.317976039583755, 0.3063863137952455, 1.3473282223064396, 4.82284896308638, 11.387207248361372, 0.06437840183247691, 0.6576758707457063, 24.64665796015196, 2.521859587878214, 14.698277606628487, 2.9781309893305394, 43.38906382183553, 10.547500495264229, 0.9143537661248952, 12.961427770645257, 2.115413209193836, 0.032194780643703826, 23.66923622390641, 0.5499297069002628, 9.45810028983953, 57.227379439257206, 37.11406473661908, 39.31960058711751, 37.07848741735004, 14.260352890611031, 36.82760722719176, 13.607927181609094, 2.314080312142015, 5.13883456658997, 0.2791348069280448, 15.063607202988582, 0.9525305097164085, 0.6784523592924234, 15.255216225740478, 8.257332809532251, 7.423519326897102, 65.27143937029021, 0.9192960457136735, 5.341945733805433, 10.810879081215562, 1.2767570249426727, 3.2499725852733863, 5.847433327491522, 8.190273885226242, 4.103200412215209, 5.103657753401548, 9.141251467774241, 6.668714969148992, 7.143467255685178, 15.89199760979578, 0.4238203231511511, 8.193840435044148, 19.50763268232853, 7.196469077856547, 41.955957008322656, 1.8883796228053287, 36.24490494473721, 3.8899876598603895, 2.0429566733946443, 12.947360107255882, 0.1251913062749155, 0.41755418855309145, 0.661189166798295, 0.7865749784645217, 26.138853399131147, 40.533498095597956, 9.13341798456545, 0.15226297839823325, 10.481905428237487, 11.14717398484371, 1.7249462151730313, 16.41112328796031]
		let data3 = [0.43966957151894226, 5.3848306876577166, 11.033990905676525, 10.12374002276492, 10.353873529012704, 1.0276291483674365, 2.0942578198538815, 6.179072540582749, 2.9411958339047017, 11.88886027653013, 5.716170715164415, 10.915255005734153, 25.547415715659007, 31.38863481082137, 18.656280302885296, 7.40729931014989, 4.264459382179888, 2.1682492268675717, 0.39283199073364483, 1.5158833092198516, 0.034348907162630296, 6.170682905580424, 5.52497342485795, 0.9500886726697206, 0.2972575957342654, 6.576392869444027, 1.3955565940865118, 11.485097341262412, 0.6162779659942467, 28.62125614311654, 18.04675869697318, 14.890298166658638, 27.912518448582734, 3.572686230528864, 23.389645344940803, 54.02793099716141, 39.27241173056498, 0.28205337190777385, 57.73712899969912, 6.5677245561314646, 6.119789686743904, 10.508979643582304, 1.6001212368234121, 69.60010757404125, 13.900898097368634, 29.230544215889992, 1.3936015029703628, 1.3415506755876652, 2.223409352468152, 2.182544619692933, 0.976317709573696, 1.6435834028676277, 1.7951511165367977, 25.105698800089517, 8.161903244813757, 6.206734190735134, 7.241330760469397, 17.61859126027356, 4.876364464622008, 17.340314760515334, 2.304216586975804, 7.657737359097008, 15.287232008337014, 0.8372885307356744, 0.5238598222605272, 40.394793465008824, 7.116629476660412, 0.6188409214941816, 10.378412047350535, 5.33678427993831, 2.8261283818745215, 1.1164587843211404, 2.9953388866836703, 30.52477764251015, 11.13280825091536, 5.319287570638019]
		// let distribution_chart = new LineC(d3.select("#test"), {
		// 	attributename: "1",
		//           width: 500,
		//           bin:50,
		//           height: 400},data3)

		//clustering
		for(let i=0;i<data1.length;i++){
			data1[i]=[data1[i]*1]
		}
		for(let i=0;i<data2.length;i++){
			data2[i]=[data2[i]*1]
		}
		for(let i=0;i<data0.length;i++){
			data0[i]=[data0[i]*1,data1[i]*1]
		}
		for(let i=0;i<data3.length;i++){
			data3[i]=[data2[i]*1,data3[i]*1]
		}
		let result1 = ClusterAl.jenks(data1, 6)
		let result2 = ClusterAl.jenks(data2, 6)
		let result3 = ClusterAl.SKmeans(data0, 6)
		let result4 = ClusterAl.SKmeans(data3, 6)
		console.log(result1,result2,result3,result4)


		//give it to regions
		let regionsample = [
			[74,35,10,11,16,14,17,18,12],
			[5,9,13,19,75,30,45,15,36,56,67,22,21,20],
			[25,23,24,1,26,27,29,28,37,31,32,33,34,0,57],
			[55,54,53,58,2,59,60,52,61,62,63,68,69,64,65,3],
			[39,4,7,6,8,38,66,41,40,42,43],
			[51,47,48,50,46,44,49,71,70,72,73]
		]
		// let regionsample = [
		// 	[12,25,21,30,36,29,0 ,58,72],
		// 	[35,15,17,24,75,31,34,4 ,60,65,68,41,46,49],
		// 	[74,10,20,19,45,28,54,1 ,61,64,8 ,39,48,50,70],
		// 	[16,13,23,9 ,56,37,55,3 ,53,62,7 ,66,43,44,51,73],
		// 	[14,5 ,67,27,33,57,59,6 ,69,40,47],
		// 	[11,18,22,26,32,2 ,52,63,38,42,71]
		// ]
		for(let i = 0;i<regionsample.length;i++){
			for(let j = 0;j<regionsample[i].length;j++){
				state.map.geojson.features[regionsample[i][j]].properties.Attribute1 = data1[result1.clustersnormal[i][j]][0]*1
				state.map.geojson.features[regionsample[i][j]].properties.fakelabel = i
			}
		}
		//calculate GMI
		let clustersnormal1 = [[],[],[],[],[],[]]
		for(let i = 0 ;i<state.map.geojson.features.length;i++){
			clustersnormal1[state.map.geojson.features[i].properties.fakelabel].push(i)
		}
		// console.log(MI.get_GMoranI(clustersnormal1))


		// let regionsample = [
		// 	 [74,11,19,30,15,25,22,36,27,31,33,57,52,60,68,65,3,8,41,42,71,72,49,51,17,20,48,1,53],
		// 	 [35,9,12,45,18,24,37,0,32,58,59,61,69,38,43,44,50,16,26,7,70],
		// 	 [47,39,6,63,67,21,5,10,23,29,54],
		// 	 [13,55,4,64,40],
		// 	 [75,14,28,66,46,2,62,56],
		// 	 [34,73]
		// ]
		// let regionsample = [
		// 	 [52,61,59,60,62,63,64,65,8,66,68,69,38,39,40,41,42,43,70,71,44,46,47,48,50,51,49,73,72],
		// 	 [26,27,29,28,37,31,32,33,34,0,57,55,54,53,58,2,3,1,4,6,7],
		// 	 [17,18,20,21,22,45,25,23,24,67,36],
		// 	 [9,75,5,30,56],
		// 	 [10,11,12,13,14,15,16,19],
		// 	 [74,35]
		// ]
		// for(let i = 0;i<regionsample.length;i++){
		// 	for(let j = 0;j<regionsample[i].length;j++){
		// 		state.map.geojson.features[regionsample[i][j]].properties.Attribute2 = data2[result2.clustersnormal[i][j]][0]*1
		// 		state.map.geojson.features[regionsample[i][j]].properties.fakelabel = i
		// 	}
		// }
		// //calculate GMI
		// let clustersnormal2 = [[],[],[],[],[],[]]
		// for(let i = 0 ;i<state.map.geojson.features.length;i++){
		// 	clustersnormal2[state.map.geojson.features[i].properties.fakelabel].push(i)
		// }
		// console.log(MI.get_GMoranI(clustersnormal2))


		// let regionsample = result3.clustersnormal
		// for(let i = 0;i<regionsample.length;i++){
		// 	for(let j = 0;j<regionsample[i].length;j++){
		// 		state.map.geojson.features[regionsample[i][j]].properties.Attribute1 = data0[result3.clustersnormal[i][j]][0]*1
		// 		state.map.geojson.features[regionsample[i][j]].properties.Attribute2 = data0[result3.clustersnormal[i][j]][1]*1
		// 		state.map.geojson.features[regionsample[i][j]].properties.fakelabel = i
		// 	}
		// }
		// //calculate GMI
		// let clustersnormal1 = [[],[],[],[],[],[]]
		// for(let i = 0 ;i<state.map.geojson.features.length;i++){
		// 	clustersnormal1[state.map.geojson.features[i].properties.fakelabel].push(i)
		// }
		// console.log(MI.get_GMoranI(clustersnormal1))
		// console.log(state.map.geojson.features,clustersnormal)



		// let regionsample = result4.clustersnormal
		// for(let i = 0;i<regionsample.length;i++){
		// 	for(let j = 0;j<regionsample[i].length;j++){
		// 		state.map.geojson.features[regionsample[i][j]].properties.Attribute1 = data3[result4.clustersnormal[i][j]][0]*1
		// 		state.map.geojson.features[regionsample[i][j]].properties.Attribute2 = data3[result4.clustersnormal[i][j]][1]*1
		// 		state.map.geojson.features[regionsample[i][j]].properties.fakelabel = i
		// 	}
		// }
		// //calculate GMI
		// let clustersnormal1 = [[],[],[],[],[],[]]
		// for(let i = 0 ;i<state.map.geojson.features.length;i++){
		// 	clustersnormal1[state.map.geojson.features[i].properties.fakelabel].push(i)
		// }
		// console.log(MI.get_GMoranI(clustersnormal1))

	}

}



function getdata(number){
	let data = []
	for(let i =0 ;i<number;i++){
			data.push(getNumberInNormalDistribution(100,10))
	}
	return data
}
function getdata2(number){
	let data = []
	for(let i =0 ;i<number;i++){
			data.push(Math.random()*Math.random()*Math.random()*100)
	}
	return data
}


function getNumberInNormalDistribution(mean,std_dev){    
    return mean+(uniform2NormalDistribution()*std_dev);
}

function uniform2NormalDistribution(){
    var sum=0.0;
    for(var i=0; i<12; i++){
        sum=sum+Math.random();
    }
    return sum-6.0;
}


module.exports = generate_data



